<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>Doctor Who data</title>
<link rel="stylesheet" href="css/style.css" />
</head>
<body>
<div id="container">
	<div id="doc"></div>
</div>
<script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>
<script>
$(function() {
	var dr = 'all_doctors.json';
	$.getJSON(dr, function(data) {
    	var doc = '<ul class="doctors">';
    	$.each(data, function (i, a) {
    		doc += '<li id="'+a.doctor+'" class="doctor"><h2>'+a.actor+'</h2>'
	    		doc += '<ul class="'+a.doctor+' doctor">';
					doc += '<li>First Appearance: <strong>'+a.first_serial+'</strong></li>';
					doc += '<li>Last Appearance: <strong>'+a.last_serial+'</strong></li>';
					doc += '<li>First Words: "<em>'+a.first_words+'</em>"</li>';
					doc += '<li>Last Words"<em>'+a.last_words+'</em>"</li>';
					doc += '<li>Sonic Screwdriver: '+a.sonic+'</li>';
					doc += '<li>Description: '+a.description;
						doc += '<ul class="seasons">';
							if(a.doctor == 'war' || a.doctor == 'ninth' || a.doctor == 'tenth' || a.doctor == 'eleventh' ||  a.doctor == 'twelfth') {
								doc += '<li class="season"><h3>Series</h3>';
							} else {
								doc += '<li class="season"><h3>Season</h3>';
							}
								$.each(a.seasons.season, function (i, a) {
							doc += '<ul class="serials">';
								if(a.classic == 'yes') {
									doc += '<li><h4>Season '+a.season+'</h4>';
								} else {
									doc += '<li><h4>Series '+a.season+'</h4>';
								};
									$.each(a.serials.serial, function (i, a) {
									doc += '<ul class="serial">';
									doc += '<li><h5>'+a.name+'</h5>';
										doc += '<ul>';
											doc += '<li>Original Airdate: '+a.airdate+'</li>';
											doc += '<li>Production Code: '+a.production_code+'</li>';
											doc += '<li>Serial Overview: '+a.overview+'</li>';
											doc += '<li><strong>Episodes</strong>';
											$.each(a.episodes.episode, function (i, a) {
												doc += '<ul>';
												if(a.archive != ''){
													doc += '<li class="episode"><b>'+a.name+'</b> ('+a.archive+')</li>';
												} else {
													doc += '<li class="episode"><b>'+a.name+'</b></li>';
												}
												doc += '<li><b>'+a.airdate+'</b></li>';
												doc += '<li>'+a.overview+'</li>';
												doc += '<li>Director: <b>'+a.director+'</b></li>';
												$.each(a.writers, function (i, a) {
													doc += '<li>Writer: <b>'+a.name+'</b></li>';
												});
												doc += '</ul>';
											});
											doc += '</li>';
										doc += '</ul>';
										if(a.companions.companion != null) {
											doc += '<ul>';
												doc += '<li><strong>Companions</strong>';
													doc += '<ul>';
													$.each(a.companions.companion, function (i, a) {
														doc += '<li><b>'+a.character+'</b>';
														if(a.died == 'yes'){
															doc += ' (died)';
														}
														if(a.left == 'yes'){
															doc += ' (left)';
														}
														if(a.left_behind == 'yes'){
															doc += ' (left behind)';
														}
														doc += '</li>';
													});			
													doc += '</ul>';							
												doc += '</li>';
											doc += '</ul>';									
										}
										if(a.enemies.enemy != '') {
											doc += '<ul>';
												doc += '<li><strong>Enemies</strong>';
													doc += '<ul>';
													$.each(a.enemies.enemy, function (i, a) {
														doc += '<li><b>'+a.enemy+'</b>';
															doc += '<ul>';
																$.each(a.actor, function (i, a) {
																	doc += '<li>'+a.name+'</li>';
																});
															doc += '</ul>';
														doc += '</li>';
													});			
													doc += '</ul>';
												doc += '</li>';	
											doc += '</ul>';								
										}				
									doc += '</li>';
									doc += '</ul>';
								});
								doc += '</li>';
							doc += '</ul>';
						});
							doc += '</li>';
						doc += '</ul>';
				doc += '</ul>';
			doc += '</li>';
    	});
    	doc += '</ul>';
    	$('#doc').html(doc);
    });
});
</script>
</body>
</html>
